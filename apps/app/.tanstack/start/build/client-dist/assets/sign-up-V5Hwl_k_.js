import{r as N,u as oe,j as L}from"./main-BNT9XLv-.js";var ie=Object.defineProperty,ae=Object.defineProperties,ue=Object.getOwnPropertyDescriptors,V=Object.getOwnPropertySymbols,ce=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable,G=(e,t,r)=>t in e?ie(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,w=(e,t)=>{for(var r in t||(t={}))ce.call(t,r)&&G(e,r,t[r]);if(V)for(var r of V(t))le.call(t,r)&&G(e,r,t[r]);return e},b=(e,t)=>ae(e,ue(t)),fe=class extends Error{constructor(e,t,r){super(t||e.toString(),{cause:r}),this.status=e,this.statusText=t,this.error=r}},de=async(e,t)=>{var r,n,s,a,o,l;let c=t||{};const i={onRequest:[t?.onRequest],onResponse:[t?.onResponse],onSuccess:[t?.onSuccess],onError:[t?.onError],onRetry:[t?.onRetry]};if(!t||!t?.plugins)return{url:e,options:c,hooks:i};for(const u of t?.plugins||[]){if(u.init){const f=await((r=u.init)==null?void 0:r.call(u,e.toString(),t));c=f.options||c,e=f.url}i.onRequest.push((n=u.hooks)==null?void 0:n.onRequest),i.onResponse.push((s=u.hooks)==null?void 0:s.onResponse),i.onSuccess.push((a=u.hooks)==null?void 0:a.onSuccess),i.onError.push((o=u.hooks)==null?void 0:o.onError),i.onRetry.push((l=u.hooks)==null?void 0:l.onRetry)}return{url:e,options:c,hooks:i}},Q=class{constructor(e){this.options=e}shouldAttemptRetry(e,t){return this.options.shouldRetry?Promise.resolve(e<this.options.attempts&&this.options.shouldRetry(t)):Promise.resolve(e<this.options.attempts)}getDelay(){return this.options.delay}},he=class{constructor(e){this.options=e}shouldAttemptRetry(e,t){return this.options.shouldRetry?Promise.resolve(e<this.options.attempts&&this.options.shouldRetry(t)):Promise.resolve(e<this.options.attempts)}getDelay(e){return Math.min(this.options.maxDelay,this.options.baseDelay*2**e)}};function pe(e){if(typeof e=="number")return new Q({type:"linear",attempts:e,delay:1e3});switch(e.type){case"linear":return new Q(e);case"exponential":return new he(e);default:throw new Error("Invalid retry strategy")}}var ye=async e=>{const t={},r=async n=>typeof n=="function"?await n():n;if(e?.auth){if(e.auth.type==="Bearer"){const n=await r(e.auth.token);if(!n)return t;t.authorization=`Bearer ${n}`}else if(e.auth.type==="Basic"){const n=r(e.auth.username),s=r(e.auth.password);if(!n||!s)return t;t.authorization=`Basic ${btoa(`${n}:${s}`)}`}else if(e.auth.type==="Custom"){const n=r(e.auth.value);if(!n)return t;t.authorization=`${r(e.auth.prefix)} ${n}`}}return t},ge=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function me(e){const t=e.headers.get("content-type"),r=new Set(["image/svg","application/xml","application/xhtml","application/html"]);if(!t)return"json";const n=t.split(";").shift()||"";return ge.test(n)?"json":r.has(n)||n.startsWith("text/")?"text":"blob"}function ve(e){try{return JSON.parse(e),!0}catch{return!1}}function Z(e){if(e===void 0)return!1;const t=typeof e;return t==="string"||t==="number"||t==="boolean"||t===null?!0:t!=="object"?!1:Array.isArray(e)?!0:e.buffer?!1:e.constructor&&e.constructor.name==="Object"||typeof e.toJSON=="function"}function X(e){try{return JSON.parse(e)}catch{return e}}function Y(e){return typeof e=="function"}function we(e){if(e?.customFetchImpl)return e.customFetchImpl;if(typeof globalThis<"u"&&Y(globalThis.fetch))return globalThis.fetch;if(typeof window<"u"&&Y(window.fetch))return window.fetch;throw new Error("No fetch implementation found")}async function _e(e){const t=new Headers(e?.headers),r=await ye(e);for(const[n,s]of Object.entries(r||{}))t.set(n,s);if(!t.has("content-type")){const n=Re(e?.body);n&&t.set("content-type",n)}return t}function Re(e){return Z(e)?"application/json":null}function be(e){if(!e?.body)return null;const t=new Headers(e?.headers);if(Z(e.body)&&!t.has("content-type")){for(const[r,n]of Object.entries(e?.body))n instanceof Date&&(e.body[r]=n.toISOString());return JSON.stringify(e.body)}return e.body}function Se(e,t){var r;if(t?.method)return t.method.toUpperCase();if(e.startsWith("@")){const n=(r=e.split("@")[1])==null?void 0:r.split("/")[0];return ee.includes(n)?n.toUpperCase():t?.body?"POST":"GET"}return t?.body?"POST":"GET"}function Te(e,t){let r;return!e?.signal&&e?.timeout&&(r=setTimeout(()=>t?.abort(),e?.timeout)),{abortTimeout:r,clearTimeout:()=>{r&&clearTimeout(r)}}}var Oe=class K extends Error{constructor(t,r){super(r||JSON.stringify(t,null,2)),this.issues=t,Object.setPrototypeOf(this,K.prototype)}};async function D(e,t){let r=await e["~standard"].validate(t);if(r.issues)throw new Oe(r.issues);return r.value}var ee=["get","post","put","patch","delete"],Pe=e=>({id:"apply-schema",name:"Apply Schema",version:"1.0.0",async init(t,r){var n,s,a,o;const l=((s=(n=e.plugins)==null?void 0:n.find(c=>{var i;return(i=c.schema)!=null&&i.config?t.startsWith(c.schema.config.baseURL||"")||t.startsWith(c.schema.config.prefix||""):!1}))==null?void 0:s.schema)||e.schema;if(l){let c=t;(a=l.config)!=null&&a.prefix&&c.startsWith(l.config.prefix)&&(c=c.replace(l.config.prefix,""),l.config.baseURL&&(t=t.replace(l.config.prefix,l.config.baseURL))),(o=l.config)!=null&&o.baseURL&&c.startsWith(l.config.baseURL)&&(c=c.replace(l.config.baseURL,""));const i=l.schema[c];if(i){let u=b(w({},r),{method:i.method,output:i.output});return r?.disableValidation||(u=b(w({},u),{body:i.input?await D(i.input,r?.body):r?.body,params:i.params?await D(i.params,r?.params):r?.params,query:i.query?await D(i.query,r?.query):r?.query})),{url:t,options:u}}}return{url:t,options:r}}}),Ee=e=>{async function t(r,n){const s=b(w(w({},e),n),{plugins:[...e?.plugins||[],Pe(e||{})]});if(e?.catchAllError)try{return await W(r,s)}catch(a){return{data:null,error:{status:500,statusText:"Fetch Error",message:"Fetch related error. Captured by catchAllError option. See error property for more details.",error:a}}}return await W(r,s)}return t};function Ue(e,t){let{baseURL:r,params:n,query:s}=t||{query:{},params:{},baseURL:""},a=e.startsWith("http")?e.split("/").slice(0,3).join("/"):r||"";if(e.startsWith("@")){const f=e.toString().split("@")[1].split("/")[0];ee.includes(f)&&(e=e.replace(`@${f}/`,"/"))}a.endsWith("/")||(a+="/");let[o,l]=e.replace(a,"").split("?");const c=new URLSearchParams(l);for(const[f,h]of Object.entries(s||{}))h!=null&&c.set(f,String(h));if(n)if(Array.isArray(n)){const f=o.split("/").filter(h=>h.startsWith(":"));for(const[h,_]of f.entries()){const S=n[h];o=o.replace(_,S)}}else for(const[f,h]of Object.entries(n))o=o.replace(`:${f}`,String(h));o=o.split("/").map(encodeURIComponent).join("/"),o.startsWith("/")&&(o=o.slice(1));let i=c.toString();return i=i.length>0?`?${i}`.replace(/\+/g,"%20"):"",a.startsWith("http")?new URL(`${o}${i}`,a):`${a}${o}${i}`}var W=async(e,t)=>{var r,n,s,a,o,l,c,i;const{hooks:u,url:f,options:h}=await de(e,t),_=we(h),S=new AbortController,R=(r=h.signal)!=null?r:S.signal,T=Ue(f,h),x=be(h),E=await _e(h),d=Se(f,h);let p=b(w({},h),{url:T,headers:E,body:x,method:d,signal:R});for(const m of u.onRequest)if(m){const g=await m(p);g instanceof Object&&(p=g)}("pipeTo"in p&&typeof p.pipeTo=="function"||typeof((n=t?.body)==null?void 0:n.pipe)=="function")&&("duplex"in p||(p.duplex="half"));const{clearTimeout:j}=Te(h,S);let y=await _(p.url,p);j();const H={response:y,request:p};for(const m of u.onResponse)if(m){const g=await m(b(w({},H),{response:(s=t?.hookOptions)!=null&&s.cloneResponse?y.clone():y}));g instanceof Response?y=g:g instanceof Object&&(y=g.response)}if(y.ok){if(!(p.method!=="HEAD"))return{data:"",error:null};const g=me(y),O={data:"",response:y,request:p};if(g==="json"||g==="text"){const P=await y.text(),se=await((a=p.jsonParser)!=null?a:X)(P);O.data=se}else O.data=await y[g]();p?.output&&p.output&&!p.disableValidation&&(O.data=await D(p.output,O.data));for(const P of u.onSuccess)P&&await P(b(w({},O),{response:(o=t?.hookOptions)!=null&&o.cloneResponse?y.clone():y}));return t?.throw?O.data:{data:O.data,error:null}}const re=(l=t?.jsonParser)!=null?l:X,k=await y.text(),J=ve(k),B=J?await re(k):null,ne={response:y,responseText:k,request:p,error:b(w({},B),{status:y.status,statusText:y.statusText})};for(const m of u.onError)m&&await m(b(w({},ne),{response:(c=t?.hookOptions)!=null&&c.cloneResponse?y.clone():y}));if(t?.retry){const m=pe(t.retry),g=(i=t.retryAttempt)!=null?i:0;if(await m.shouldAttemptRetry(g,y)){for(const P of u.onRetry)P&&await P(H);const O=m.getDelay(g);return await new Promise(P=>setTimeout(P,O)),await W(e,b(w({},t),{retryAttempt:g+1}))}}if(t?.throw)throw new fe(y.status,y.statusText,J?B:k);return{data:null,error:b(w({},B),{status:y.status,statusText:y.statusText})}},xe={};const $=Object.create(null),I=e=>xe||globalThis.Deno?.env.toObject()||globalThis.__env__||(e?$:globalThis),A=new Proxy($,{get(e,t){return I()[t]??$[t]},has(e,t){const r=I();return t in r||t in $},set(e,t,r){const n=I(!0);return n[t]=r,!0},deleteProperty(e,t){if(!t)return!1;const r=I(!0);return delete r[t],!0},ownKeys(){const e=I(!0);return Object.keys(e)}});class Ae extends Error{constructor(t,r){super(t),this.name="BetterAuthError",this.message=t,this.cause=r,this.stack=""}}function Le(e){try{return new URL(e).pathname!=="/"}catch{throw new Ae(`Invalid base URL: ${e}. Please provide a valid base URL.`)}}function M(e,t="/api/auth"){return Le(e)?e:(t=t.startsWith("/")?t:`/${t}`,`${e.replace(/\/+$/,"")}${t}`)}function Ie(e,t,r){if(e)return M(e,t);const n=A.BETTER_AUTH_URL||A.NEXT_PUBLIC_BETTER_AUTH_URL||A.PUBLIC_BETTER_AUTH_URL||A.NUXT_PUBLIC_BETTER_AUTH_URL||A.NUXT_PUBLIC_AUTH_URL||(A.BASE_URL!=="/"?A.BASE_URL:void 0);if(n)return M(n,t);if(typeof window<"u"&&window.location)return M(window.location.origin,t)}let v=[],U=0;const C=4;let te=e=>{let t=[],r={get(){return r.lc||r.listen(()=>{})(),r.value},lc:0,listen(n){return r.lc=t.push(n),()=>{for(let a=U+C;a<v.length;)v[a]===n?v.splice(a,C):a+=C;let s=t.indexOf(n);~s&&(t.splice(s,1),--r.lc||r.off())}},notify(n,s){let a=!v.length;for(let o of t)v.push(o,r.value,n,s);if(a){for(U=0;U<v.length;U+=C)v[U](v[U+1],v[U+2],v[U+3]);v.length=0}},off(){},set(n){let s=r.value;s!==n&&(r.value=n,r.notify(s))},subscribe(n){let s=r.listen(n);return n(r.value),s},value:e};return r};const Ne=5,q=6,F=10;let je=(e,t,r,n)=>(e.events=e.events||{},e.events[r+F]||(e.events[r+F]=n(s=>{e.events[r].reduceRight((a,o)=>(o(a),a),{shared:{},...s})})),e.events[r]=e.events[r]||[],e.events[r].push(t),()=>{let s=e.events[r],a=s.indexOf(t);s.splice(a,1),s.length||(delete e.events[r],e.events[r+F](),delete e.events[r+F])}),ke=1e3,Ce=(e,t)=>je(e,n=>{let s=t(n);s&&e.events[q].push(s)},Ne,n=>{let s=e.listen;e.listen=(...o)=>(!e.lc&&!e.active&&(e.active=!0,n()),s(...o));let a=e.off;return e.events[q]=[],e.off=()=>{a(),setTimeout(()=>{if(e.active&&!e.lc){e.active=!1;for(let o of e.events[q])o();e.events[q]=[]}},ke)},()=>{e.listen=s,e.off=a}});function qe(e,t,r){let n=new Set(t).add(void 0);return e.listen((s,a,o)=>{n.has(o)&&r(s,a,o)})}const Fe=typeof window>"u",De=(e,t,r,n)=>{const s=te({data:null,error:null,isPending:!0,isRefetching:!1,refetch:()=>a()}),a=()=>{const l=typeof n=="function"?n({data:s.get().data,error:s.get().error,isPending:s.get().isPending}):n;return r(t,{...l,async onSuccess(c){s.set({data:c.data,error:null,isPending:!1,isRefetching:!1,refetch:s.value.refetch}),await l?.onSuccess?.(c)},async onError(c){const{request:i}=c,u=typeof i.retry=="number"?i.retry:i.retry?.attempts,f=i.retryAttempt||0;u&&f<u||(s.set({error:c.error,data:null,isPending:!1,isRefetching:!1,refetch:s.value.refetch}),await l?.onError?.(c))},async onRequest(c){const i=s.get();s.set({isPending:i.data===null,data:i.data,error:null,isRefetching:!0,refetch:s.value.refetch}),await l?.onRequest?.(c)}})};e=Array.isArray(e)?e:[e];let o=!1;for(const l of e)l.subscribe(()=>{Fe||(o?a():Ce(s,()=>(setTimeout(()=>{a()},0),o=!0,()=>{s.off(),l.off()})))});return s},$e={proto:/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,constructor:/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,protoShort:/"__proto__"\s*:/,constructorShort:/"constructor"\s*:/},Be=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/,z={true:!0,false:!1,null:null,undefined:void 0,nan:Number.NaN,infinity:Number.POSITIVE_INFINITY,"-infinity":Number.NEGATIVE_INFINITY},Me=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d{1,7}))?(?:Z|([+-])(\d{2}):(\d{2}))$/;function We(e){return e instanceof Date&&!isNaN(e.getTime())}function He(e){const t=Me.exec(e);if(!t)return null;const[,r,n,s,a,o,l,c,i,u,f]=t;let h=new Date(Date.UTC(parseInt(r,10),parseInt(n,10)-1,parseInt(s,10),parseInt(a,10),parseInt(o,10),parseInt(l,10),c?parseInt(c.padEnd(3,"0"),10):0));if(i){const _=(parseInt(u,10)*60+parseInt(f,10))*(i==="+"?-1:1);h.setUTCMinutes(h.getUTCMinutes()+_)}return We(h)?h:null}function Je(e,t={}){const{strict:r=!1,warnings:n=!1,reviver:s,parseDates:a=!0}=t;if(typeof e!="string")return e;const o=e.trim();if(o[0]==='"'&&o.endsWith('"')&&!o.slice(1,-1).includes('"'))return o.slice(1,-1);const l=o.toLowerCase();if(l.length<=9&&l in z)return z[l];if(!Be.test(o)){if(r)throw new SyntaxError("[better-json] Invalid JSON");return e}if(Object.entries($e).some(([i,u])=>{const f=u.test(o);return f&&n&&console.warn(`[better-json] Detected potential prototype pollution attempt using ${i} pattern`),f})&&r)throw new Error("[better-json] Potential prototype pollution attempt detected");try{return JSON.parse(o,(u,f)=>{if(u==="__proto__"||u==="constructor"&&f&&typeof f=="object"&&"prototype"in f){n&&console.warn(`[better-json] Dropping "${u}" key to prevent prototype pollution`);return}if(a&&typeof f=="string"){const h=He(f);if(h)return h}return s?s(u,f):f})}catch(i){if(r)throw i;return e}}function Ve(e,t={strict:!0}){return Je(e,t)}const Ge={id:"redirect",name:"Redirect",hooks:{onSuccess(e){if(e.data?.url&&e.data?.redirect&&typeof window<"u"&&window.location&&window.location)try{window.location.href=e.data.url}catch{}}}};function Qe(e){const t=te(!1);return{session:De(t,"/get-session",e,{method:"GET"}),$sessionSignal:t}}const Xe=e=>{const t="credentials"in Request.prototype,r=Ie(e?.baseURL,e?.basePath),n=e?.plugins?.flatMap(d=>d.fetchPlugins).filter(d=>d!==void 0)||[],s={id:"lifecycle-hooks",name:"lifecycle-hooks",hooks:{onSuccess:e?.fetchOptions?.onSuccess,onError:e?.fetchOptions?.onError,onRequest:e?.fetchOptions?.onRequest,onResponse:e?.fetchOptions?.onResponse}},{onSuccess:a,onError:o,onRequest:l,onResponse:c,...i}=e?.fetchOptions||{},u=Ee({baseURL:r,...t?{credentials:"include"}:{},method:"GET",jsonParser(d){return d?Ve(d,{strict:!1}):null},customFetchImpl:async(d,p)=>{try{return await fetch(d,p)}catch{return Response.error()}},...i,plugins:[s,...i.plugins||[],...e?.disableDefaultFetchPlugins?[]:[Ge],...n]}),{$sessionSignal:f,session:h}=Qe(u),_=e?.plugins||[];let S={},R={$sessionSignal:f,session:h},T={"/sign-out":"POST","/revoke-sessions":"POST","/revoke-other-sessions":"POST","/delete-user":"POST"};const x=[{signal:"$sessionSignal",matcher(d){return d==="/sign-out"||d==="/update-user"||d.startsWith("/sign-in")||d.startsWith("/sign-up")||d==="/delete-user"||d==="/verify-email"}}];for(const d of _)d.getAtoms&&Object.assign(R,d.getAtoms?.(u)),d.pathMethods&&Object.assign(T,d.pathMethods),d.atomListeners&&x.push(...d.atomListeners);const E={notify:d=>{R[d].set(!R[d].get())},listen:(d,p)=>{R[d].subscribe(p)},atoms:R};for(const d of _)d.getActions&&Object.assign(S,d.getActions?.(u,E,e));return{pluginsActions:S,pluginsAtoms:R,pluginPathMethods:T,atomListeners:x,$fetch:u,$store:E}};function Ye(e,t,r){const n=t[e],{fetchOptions:s,query:a,...o}=r||{};return n||(s?.method?s.method:o&&Object.keys(o).length>0?"POST":"GET")}function ze(e,t,r,n,s){function a(o=[]){return new Proxy(function(){},{get(l,c){const i=[...o,c];let u=e;for(const f of i)if(u&&typeof u=="object"&&f in u)u=u[f];else{u=void 0;break}return typeof u=="function"?u:a(i)},apply:async(l,c,i)=>{const u="/"+o.map(E=>E.replace(/[A-Z]/g,d=>`-${d.toLowerCase()}`)).join("/"),f=i[0]||{},h=i[1]||{},{query:_,fetchOptions:S,...R}=f,T={...h,...S},x=Ye(u,r,f);return await t(u,{...T,body:x==="GET"?void 0:{...R,...T?.body||{}},query:_||T?.query,method:x,async onSuccess(E){await T?.onSuccess?.(E);const d=s?.find(y=>y.matcher(u));if(!d)return;const p=n[d.signal];if(!p)return;const j=p.get();setTimeout(()=>{p.set(!j)},10)}})}})}return a()}function Ze(e,t={}){let r=N.useRef(e.get());const{keys:n,deps:s=[e,n]}=t;let a=N.useCallback(l=>{const c=i=>{r.current!==i&&(r.current=i,l())};return c(e.value),n?.length?qe(e,n,c):e.listen(c)},s),o=()=>r.current;return N.useSyncExternalStore(a,o,o)}function Ke(e){return`use${et(e)}`}function et(e){return e.charAt(0).toUpperCase()+e.slice(1)}function tt(e){const{pluginPathMethods:t,pluginsActions:r,pluginsAtoms:n,$fetch:s,$store:a,atomListeners:o}=Xe(e);let l={};for(const[u,f]of Object.entries(n))l[Ke(u)]=()=>Ze(f);const c={...r,...l,$fetch:s,$store:a};return ze(c,s,t,n,o)}const rt=tt({});function ot(){const e=oe(),[t,r]=N.useState(""),[n,s]=N.useState("");function a(){rt.signUp.email({email:t,name:t,password:n}),e.navigate({to:"/"})}return L.jsxs("div",{children:[L.jsx("h1",{children:"Sign Up"}),L.jsx("input",{type:"email",value:t,onChange:o=>r(o.target.value)}),L.jsx("input",{type:"password",value:n,onChange:o=>s(o.target.value)}),L.jsx("button",{onClick:a,type:"button",children:"Sign Up"})]})}export{ot as component};
